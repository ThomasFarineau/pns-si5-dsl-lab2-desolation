<html>

<head>
    <title>MIDI Player</title>
    <script
            src="https://cdn.jsdelivr.net/combine/npm/tone@14.7.58,npm/@magenta/music@1.23.1/es6/core.js,npm/focus-visible@5,npm/html-midi-player@1.5.0"></script>
    <link rel="stylesheet" href="./style">

</head>

<body>
<header>
    <h1 data-name="name"></h1>
    <div class="center">
        <div data-name="midi" style="display: none">
            <a href="" target="_blank">Download MIDI file</a>
        </div>
        <div data-name="json" style="display: none;">
            <a href="" target="_blank">Download JSON file</a>
        </div>
    </div>
    <midi-player id="player" sound-font src="">
    </midi-player>
</header>
<section>
    <midi-visualizer id="v_roll" sound-font visualizer="#section3 midi-visualizer">
    </midi-visualizer>
</section>
<section id="partition">
    <midi-visualizer id="v_staff" src="" type="staff">
    </midi-visualizer>
    <div data-name="tracks">
    </div>
</section>
</body>
</html>

<script type="module" src="./script"></script>

<style>

    /* Custom visualizer style */
    midi-visualizer .piano-roll-visualizer {
        background: #ffd;
        border: 2px solid black;
        border-top: none;
        border-radius: 0 0 10px 10px;
        margin: 4px;
        margin-top: 0;
        overflow: auto;
    }

    midi-visualizer svg rect.note {
        opacity: 0.6;
        stroke-width: 2;
    }

    midi-visualizer svg rect.note[data-instrument="0"] {
        fill: #e22;
        stroke: #500;
    }

    midi-visualizer svg rect.note[data-instrument="2"] {
        fill: #2ee;
        stroke: #055;
    }

    midi-visualizer svg rect.note[data-is-drum="true"] {
        fill: #888;
        stroke: #888;
        border-radius: 100px;
        aspect-ratio: 1;
    }

    midi-visualizer svg rect.note.active {
        opacity: 0.9;
        stroke: #000;
    }
</style>